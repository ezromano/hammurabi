# Namespace:    Hammurabi.Econ
# Summary:      Basic economic relationships related to households
# Updated:      2012-06-23
# Author:       Michael Poulshock


# HOUSEHOLD-RELATED FACTS	

# Household size
Tnum HouseholdSize(Thing p) =
	Stub()
	# HouseholdOf(p).Constituents.Count

# A person's household (set)
Tset HouseholdMembersOf(Thing p) =
	Stub()
	# HouseholdOf(p).Constituents

	##
# A person's household (entity)
Thing HouseholdOf(Thing p) =
	new Thing(members)
	
	Tset members =
		set:
		if hh.IsKnown -> hh
		else AllPeople.Filter(ShareHousehold(_,p))	# sym
	
	Tset hh =
		TsetIn HouseholdOf(p)
	##
	
# Two people are members of the same household.
Tbool ShareHousehold(Thing p1, Thing p2) =
	LivesWith(p1, p2) 	# simplifying assumption
				 
# Two people share a principal abode.
TboolInSym SharePrincipalAbode(Thing p1, Thing p2) =
	LivesWith(p1, p2) 	# simplifying assumption

# Live together	
TboolInSym LivesWith(Thing p1, Thing p2)

# Returns whether one person provides financial support for another.
TboolIn ProvidesSupportFor(Thing p1, Thing p2)

# Purchase and prepare meals together for home consumption
TboolIn PurchaseAndPrepareMealsTogether(Thing p1, Thing p2) 


# UNIT TESTS

Test: TboolInSym1
- Thing a
- Thing b
- SharePrincipalAbode(a,b) = true
- Econ.SharePrincipalAbode(a,b).Out =?= true

Test: TboolInSym2
- Thing a
- Thing b
- SharePrincipalAbode(a,b) = true
- Econ.SharePrincipalAbode(b,a).Out =?= true

Test: ShareAbode
- Thing a
- Thing b
- LivesWith(a,b) = true
- Econ.SharePrincipalAbode(b,a).Out =?= true

Test: LivesWith1
- Thing a
- Thing b
- LivesWith(a,b) = true
- Econ.LivesWith(a,b).Out =?= true

Test: LivesWith2
- Thing a
- Thing b
- LivesWith(a,b) = true
- Econ.LivesWith(b,a).Out =?= true

